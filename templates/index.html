<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>LayoutLand </title>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
</head>
<body>
    <style>
        #originalImage {
            width: 100%;
            height: auto;
            position: relative;
            vertical-align: top;
        }

        #row {
            width: 100%;
        }

        .imageDiv {
            width: 38%;
            padding: 5px;
            display: inline-block;
            align-content: start;
            vertical-align: top;
        }
        .imageDivOriginal {
            width: 15%;
            padding: 5px;
            display: inline-block;
            align-content: start;
            vertical-align: top;
        }

        .appImg {
          width: 20%;
          height: auto;
          position: relative;
          vertical-align: top;
        }

        .appSpot {
          position: relative;
          vertical-align: top;
          border: 2px;
          display: inline-block;
          align-content: start;
          vertical-align: top;
        }

        #layoutGame {
          height: 1000px;
          width: 38%;
          padding: 5px;
          display: inline-block;
          align-content: start;
          vertical-align: top;
        }
    </style>

    <h1>LayoutLand </h1>
    <h2>by Montana Fowler and Jeff Weekley</h2>
    <h3>CMPM202 - UC Santa Cruz - Winter 2020</h3>


    <h4>1. Upload Image</h4>
    <form action={{ url_for('layoutLand') }} method="post">
        <input type="text" name="imageNameInput">
        <input type="submit">
    </form>

    <div id="row">


        <div id="inputImg" class="imageDivOriginal">
            <h4>2. Input Image</h4>
            <img id="originalImage" src="data:image/jpg;base64,{{inputData}}" />
        </div>

        <div id="segmentedImg" class="imageDiv">
            <h4>3. Segmented Image</h4>
            {% for app in segmentedData %}
              <img class="appImg" src="data:image/jpg;base64,{{app}}" />

            {% endfor %}
            {% for text in segmentedDataClassifications %}
              <p value="{{ text }}">{{ text }}</p>
            {% endfor %}
        </div>

        <div id="layoutGame" class="imageDiv">
          <h4> 4. Drag your apps into the optimal layout arrangement. </h4>
            <script>
              var layoutGameDiv = document.getElementById("layoutGame");
              let size = layoutGameDiv.offsetWidth / parseFloat('{{cols}}') - 5.0;
              console.log("layoutGameDiv.width " + layoutGameDiv.offsetWidth)
              console.log("size " + size.toString());
              var count = 0;
              for (let r = 0; r < parseInt('{{rows}}'); r++) {
                for (let c = 0; c < parseInt('{{cols}}'); c++) {
                  sizeString = size.toString() + "px;";
                  let div = document.createElement('div');
                  div.className = "appSpot";
                  if((r + c)%2 != 0) {
                    div.style = 'width: ' + sizeString + 'height: ' + sizeString + 'background-color: #BCF1E8;';
                  } else {
                    div.style = 'width: ' + sizeString + 'height: ' + sizeString + 'background-color: #D3D3D3;';
                  }

                  console.log("r " + r.toString() + " c " + c.toString());
                  layoutGame.appendChild(div);
                  count += 1;
                }
              }
            </script>

            {%for item in spotCountArray%}
              <div class="appSpot" style="width: calc({{item}} * 1%); height: calc({{item}} * 100%);">
                <p value="{{item}}"/>
              </div>
            {%endfor%}
        </div>
    </div>
</body>
</html>
